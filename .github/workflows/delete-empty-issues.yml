name: Issue Cleanup

on:
  issues:
    types: [opened]

concurrency:
  group: "issue-cleanup"
  cancel-in-progress: false

jobs:
  label_issues:
    name: Handle empty or invalid issues
    runs-on: ubuntu-latest
    permissions:
      issues: write

    if: github.event.issue.body == '' || contains(github.event.issue.body, 'Give a 1 sentence description of a problem with the current OSSU Curriculum. Successful critiques of the curriculum will point out ways that OSSU is failing to uphold')

    steps:
      - name: Add explanatory comment
        uses: actions-cool/issues-helper@v3
        with:
          actions: create-comment
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          body: |
            Hello @${{ github.event.issue.user.login }} üëã

            It looks like you've opened an empty issue or one without a clear problem description.  
            Please understand that OSSU is a popular project used by many learners, and empty issues create extra work for maintainers.  

            If you want to practice creating issues, you can try it in your own repository:  
            - [Create a new repository](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository)  
            - [Practice creating and editing issues](https://docs.github.com/en/issues/tracking-your-work-with-issues/configuring-issues/quickstart)

            We look forward to your future contributions to OSSU that help improve computer science education worldwide üåç

      - name: Close the issue
        uses: actions-cool/issues-helper@v3
        with:
          actions: close-issue
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}

